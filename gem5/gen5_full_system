
0. 패치 가능한 버전의 gem5 다운로드

나중에 nvamin 패치를 해야 하기 때문에,
nvmain에서 지원하는 gem5버전을 설치해야 한다.
(원래 gem5 버전에서 패치 해야 하기 때문에, 
 그 '원래버전'을 맞게 받아야 한다.)

버전과 주소는 다음과 같으니 참고 한다.
버전 : changeset 10146 27dfed4c8403
주소 : http://repo.gem5.org/gem5/rev/27dfed4c8403

다음 hg 명령어로 10146버전을 받아올 수 있다. 
hg clone http://repo.gem5.org/gem5/ -r 27dfed4c8403
시간이 조금 소요된다..

adding * ....의 문자 몇줄이 터미널에 출력된다.

1. 풀-시스템 다운로드
http://gem5.org/Download
위 사이트를 참고하면 풀-시스템 다운로드에 대해 명시되어 있다.
/* 뭐가 다른지 모르겠지만 풀-시스템에 nvmain을 엮을 것이다! */

1-1. 구성요소
위 링크에서 제공하는 다운로드의 구성은 다음 두 가지이다.
a. SMP버전의 디스크 이미지를 압축한 tar파일과 
b. 2.6.25.1, 2.6.28.4에 대한 설정파일을 압축한 tar파일을 다운받을 수 있다.

2. 설치 방법
위 사이트에서 설치 방법은 다음 링크를 따른다.
http://gem5.org/Introduction#Getting_Additional_Tools_and_Files

여기서는 gem5를 구축하는데 필요한 추가도구를 설명한다고 한다.

풀-시스템 버전을 실행 하려는경우, 
전체 시스템 파일을 다운로드 해야 한다고 한다.
(이 다운로드에 대한 링크는 1.의 링크로 다시 연결한다..)

2-1. 설정파일
이런 파일의 경로는 configs/common/SysPaths.py에서 결정된다고 한다.
위 .py파일에서 하드코딩된 기본 경로가 몇가지 있다.
그 경로를 바꾸거나 M5_PATH 환경변수를 설정해서 
경로를 대체 할 .py파일을 편집 할 수 있다.

이게 제대로 안되면 다음과같은 오류가 발생한다.
Can't find a path to system files. 
when you first attempt to run the simulator in full-system mode. 

3. 설정
% sudo mkdir -p /dist/m5/system
% cd /dist/m5/system
% sudo tar vxfj <path>/m5_system_2.0b3.tar.bz2
% sudo mv m5_system_2.0b3/* . ; sudo rmdir m5_system_2.0b3/
% sudo chgrp -R <grp> /dist  # where <grp> is a group that contains all the m5 users

/dist/m5/system에 디렉토리를 만들고,
풀-시스템 파일 압축을 풀고,
그룹을 적절히 바꾸어 준다.

4. 빌딩
gem5의 scons는 파이썬 기반으로 작동한다.












